@* Views/Quiz/Completed.cshtml *@
@model BOTGC.MemberPortal.Models.QuizCompletedListViewModel

@{
    ViewData["Title"] = "Completed quizzes";
}

<div class="quiz">
    <header class="quiz__header">
        <a class="quiz__back" href="/quiz" aria-label="Back">‹</a>
        <h1 class="quiz__title">Completed quizzes</h1>
        <span class="quiz__spacer" aria-hidden="true"></span>
    </header>

    <section class="quiz__section">
        @if (Model.Attempts is null || Model.Attempts.Count == 0)
        {
            <div class="quiz__empty">
                <p class="quiz__empty-title">No completed quizzes yet</p>
                <p class="quiz__empty-subtitle">Start a quiz to see results here.</p>
            </div>
        }
        else
        {
            <ul class="qzlist">
                @foreach (var q in Model.Attempts)
                {
                    var statusClass = q.Passed ? "qzcard--pass" : "qzcard--fail";

                    <li>
                        <a class="qzcard @statusClass" href="/quiz/completed/@q.AttemptId">
                            <div class="qzcard__score">
                                <div class="qzcard__score-main">@q.CorrectCount</div>
                                <div class="qzcard__score-sub">/ @q.TotalQuestions</div>
                            </div>

                            <div class="qzcard__main">
                                <div class="qzcard__title">Quiz complete</div>
                                <div class="qzcard__subtitle">
                                    @q.FinishedAtUtc.ToLocalTime().ToString("dd MMM yyyy, HH:mm")
                                    · Pass mark @q.PassMark
                                </div>
                            </div>

                            <span class="qzcard__chev" aria-hidden="true">›</span>
                        </a>
                    </li>
                }
            </ul>
        }
    </section>
</div>
