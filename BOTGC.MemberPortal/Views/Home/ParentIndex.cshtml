@model BOTGC.MemberPortal.Models.ParentDashboardViewModel

@{
    ViewData["Title"] = "Parent dashboard";
}

<div class="dashboard">
    <header class="dashboard__header">
        <div class="dashboard__greeting">
            <h1 class="dashboard__title">
                Hi, <span class="dashboard__name">@Model.DisplayName</span>!
            </h1>

            @if (Model.Children != null && Model.Children.Count > 0)
            {
                if (Model.Children.Count == 1)
                {
                    <p class="dashboard__subtitle">
                        Linked junior: <strong>@Model.Children[0].DisplayName</strong>
                    </p>
                }
                else
                {
                    <p class="dashboard__subtitle">
                        Selected junior:
                        <strong>@(Model.SelectedChildName ?? "Choose a junior")</strong>
                    </p>

                    <div class="dashboard__chips" aria-label="Select junior">
                        @foreach (var child in Model.Children)
                        {
                            var isSelected = Model.SelectedChildMemberNumber.HasValue && Model.SelectedChildMemberNumber.Value == child.MemberNumber;
                            var href = Url.Action("Index", "Home", new { child = child.MemberNumber });

                            <a class="chip app-link @(isSelected ? "is-active" : "")" href="@href">
                                @child.DisplayName
                            </a>
                        }
                    </div>
                }
            }
            else
            {
                <p class="dashboard__subtitle">
                    No juniors linked yet.
                </p>
            }
        </div>

        @if (!string.IsNullOrWhiteSpace(Model.AvatarUrl))
        {
            <img class="dashboard__avatar" src="@Model.AvatarUrl" alt="" />
        }
    </header>

    <section class="dashboard__section">
        <h2 class="dashboard__section-title">Junior</h2>

        <div class="dashboard__card">
            <ul class="qa">
                @foreach (var action in Model.ChildActions)
                {
                    <li class="qa__item">
                        <a class="qa__link app-link" href="@action.Href">
                            <span class="qa__icon" aria-hidden="true">
                                <img src="@action.IconUrl" alt="" />
                            </span>

                            <span class="qa__text">
                                <span class="qa__title">@action.Title</span>
                                <span class="qa__subtitle">@action.Subtitle</span>
                            </span>

                            <span class="qa__chev" aria-hidden="true">›</span>
                        </a>
                    </li>
                }
            </ul>
        </div>
    </section>

    <section class="dashboard__section">
        <h2 class="dashboard__section-title">For parents</h2>

        <div class="dashboard__card">
            <ul class="qa">
                @foreach (var action in Model.ParentActions)
                {
                    <li class="qa__item">
                        <a class="qa__link app-link" href="@action.Href">
                            <span class="qa__icon" aria-hidden="true">
                                <img src="@action.IconUrl" alt="" />
                            </span>

                            <span class="qa__text">
                                <span class="qa__title">@action.Title</span>
                                <span class="qa__subtitle">@action.Subtitle</span>
                            </span>

                            <span class="qa__chev" aria-hidden="true">›</span>
                        </a>
                    </li>
                }
            </ul>
        </div>
    </section>
</div>
